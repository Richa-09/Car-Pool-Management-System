{%extends 'general/layout.html'%}
{% load static %}
{%block title%}ePool | Ride{%endblock%}


{%block head%} 
<link rel="stylesheet" href="{% static 'css/ride.css' %}">
{%endblock%}


{%block content%}
<h3>My Google Maps Demo</h3>
<div id="map"></div>

<div id="floating">
    From: 
    <select id="start">
        <option value="chicago, il">Varanasi</option>
        <option value="st louis, mo">Lucknow</option>
    </select>
    <br>
    To:
    <select id="end">
        <option value="chicago, il">Varanasi</option>
        <option value="st louis, mo">Lucknow</option>
    </select>
</div>

<script>
    // Initialize and add the map
    function initMap() {
      var directionsService = new google.maps.DirectionsService;
      var directionsDisplay = new google.maps.DirectionsRenderer;
      var map = new google.maps.Map(document.getElementById('map'), {zoom: 4, center: {lat: 41.85, lng:-87.65}
    });
      directionsDisplay.setMap(map);

      var onChangeHandler = function(){
          calculateAndDisplayRoute(directionsService, directionsDisplay);
      };
      document.getElementById('start').addEventListener('change', onChangeHandler);
      document.getElementById('end').addEventListener('change', onChangeHandler);
    }


    function calculateAndDisplayRoute(directionsService, directionsDisplay){
        directionsService.route({
            origin: document.getElementById('start').value,
            destination: document.getElementById('end').value,
            travelMode: 'DRIVING'
           },function(response, status){
                  if (status === 'OK'){
                  directionsDisplay.setDirections(response);
              } else {
                  window.alert('Directions request failed due to '+ status);
              }
          });
      }
        </script>
        <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCyXf_FaAZLXRfhgnlcdml7Xnee7bRXgTc&callback=initMap">
        </script>
{%endblock%}